<!DOCTYPE html>
<html lang="en">
<head>
<script type="text/javascript" src="js/three.js"></script>
<script type="text/javascript" src="js/jquery.js"></script>
<script type="text/javascript" src="js/TransformControls.js"></script>
<script type="text/javascript" src="js/OrbitControls.js"></script>
<meta charset="UTF-8">
<title>threejs-basic-geometry</title>
<style>
body{
font-family: Monospace;
background: #f0f0f0;
margin: 0px;
overflow: hidden;
}
</style>
</head>
<body>

<div>
<div>
<canvas id="mainCanvas" width="600px" height="450px" ></canvas>
</div>
<div>
<button id="addShape">add shape</button>
<select id="shapeSel">
  <option value ="cube">cube</option>
  <option value ="mesh">mesh</option>
  <option value="sphere">sphere</option>
  <option value="line">line</option>
  <option value="cylinder">cylinder</option>
</select>

<div>
material:
<select id="material">
  <option value="MeshLambertMaterial">MeshLambertMaterial</option>
</select>
</div>

color: <input id="color" size=8 value=0x606060> </input>

<div id="cubeOptions" style="display:inline">
<div>
x:<input id="cube-x" size=4 value=-4></input>
y:<input id="cube-y" size=4 value=-4></input>
z:<input id="cube-z" size=4 value=-4></input>
</div>
<div>
L:<input id="cube-L" size=4 value=8></input>
W:<input id="cube-W" size=4 value=8></input>
H:<input id="cube-H" size=4 value=8></input>
</div>
</div>
<div>


<div id="meshOptions" style="display:none">
<div>
x1:<input size=4 value=-4></input>
y1:<input size=4 value=-4></input>
z1:<input size=4 value=-4></input>
</div>
<div>
x2:<input size=4 value=-4></input>
y2:<input size=4 value=-4></input>
z2:<input size=4 value=-4></input>
</div>
<div>
x3:<input size=4 value=-4></input>
y3:<input size=4 value=-4></input>
z3:<input size=4 value=-4></input>
</div>
</div>

<div id="sphereOptions" style="display:none">
  shpere
</div>

<div id="lineOptions" style="display:none">
  line
</div>

<div id="cylinderOptions" style="display:none">
  cylinder
</div>

<script>
</script>

</div>

<script type="text/javascript">

function init() {
  /* renderer */
  var renderer = new THREE.WebGLRenderer({
	 canvas: document.getElementById('mainCanvas')
  });

  /* camera */
  var camera = new THREE.PerspectiveCamera( 50, $("#mainCanvas").width() / $("#mainCanvas").height(), 1, 3000 );
  camera.position.set( 1000, 500, 1000 );
  camera.lookAt( 0, 200, 0 );

  /* scene */
  var scene = new THREE.Scene();
  scene.add( new THREE.GridHelper( 1000, 10 ) );

  /* light source */
  var light = new THREE.DirectionalLight( 0xffffff, 2 );
  light.position.set( 1, 1, 1 );
  scene.add( light );

  var render = function() {
	renderer.render(scene, camera);
  }

  scene.add( new THREE.GridHelper( 1000, 10 ) );

  var orbit = new THREE.OrbitControls( camera, renderer.domElement );
  orbit.update();
  orbit.addEventListener( 'change', render );

  control = new THREE.TransformControls( camera, renderer.domElement );
  control.addEventListener( 'change', render );

  control.addEventListener( 'dragging-changed', function ( event ) {
	  orbit.enabled = ! event.value;
  });

  var geometry = new THREE.BoxBufferGeometry( 200, 200, 200 );
  var material = new THREE.MeshLambertMaterial( { color: 0x003300, transparent: true } );
  var cube = new THREE.Mesh(geometry, material);

  scene.add(cube);

  control.attach(cube);
  scene.add( control );

  $("#shapeSel").change(function() {
	var shapes = new Array("cube", "mesh", "sphere", "line", "cylinder");

	for (var i in shapes) {
	  var optId = "#" + shapes[i] + "Options";
	  if ($("#shapeSel").val() == shapes[i]) {
		$(optId).show();
	  } else {
		$(optId).hide();
	  }
	}
  });

  $("#addShape").click(function() {
	var val = $("#shapeSel").val();
	if (val == "cube") {
	  var x = parseFloat($("#cube-x").val());
	  var y = parseFloat($("#cube-y").val());
	  var z = parseFloat($("#cube-z").val());
	  var L = parseFloat($("#cube-L").val());
	  var W = parseFloat($("#cube-W").val());
	  var H = parseFloat($("#cube-H").val());
	  console.log(new Array(x, y, z, L, W, H));
	  var cubeGeo = new THREE.CubeGeometry(x, y, z);
	  var material = new THREE.MeshLambertMaterial({
		color: 0x003300,
		wireframe:false
	  });
	  var cube = new THREE.Mesh(cubeGeo, material);
	  cube.position.set(x, y, z);
	  scene.add(cube);
	}
  });
}

init(); // from here

function createCamera() {
  var camera;
  camera = new THREE.PerspectiveCamera(30, window.innerWidth/window.innerHeight, 1, 1000);
  camera.position.set(100, 300, 100);//设置相机位置
  camera.lookAt(new THREE.Vector3(0,0,0));//让相机指向原点
  return camera;
}

function addLightSource(scene) {
  var ambientLight = new THREE.AmbientLight(0x606060);
  scene.add(ambientLight);

  /* parallel light */
  var directionalLight = new THREE.DirectionalLight(0xffffff);
  directionalLight.position.set(1, 0.75, 0.5).normalize();
  scene.add(directionalLight);
}

function createPlane() {
  var planeGeo = new THREE.PlaneGeometry(100,100,10,10);//创建平面
  var planeMat = new THREE.MeshLambertMaterial({  //创建材料
    color:0x666666,
    wireframe:false
  });
  var planeMesh = new THREE.Mesh(planeGeo, planeMat);//创建网格模型
  planeMesh.position.set(0, 0, -20);//设置平面的坐标
  planeMesh.rotation.x = -0.5 * Math.PI;//将平面绕X轴逆时针旋转90度
  return planeMesh;//将平面添加到场景中
}

function createCube() {
  var cubeGeo = new THREE.CubeGeometry(20, 20, 20, 5, 5, 5);//创建立方体
  var cubeMat = new THREE.MeshLambertMaterial({//创建材料
    color:0x003300,
    wireframe:false
  });
  var cubeMesh = new THREE.Mesh(cubeGeo, cubeMat);//创建立方体网格模型
  cubeMesh.position.set(20, 10, 0);//设置立方体的坐标
  return cubeMesh;//将立方体添加到场景中
}

function createSphere() {
  var sphereGeo = new THREE.SphereGeometry(16, 40, 40);//创建球体
  var sphereMat = new THREE.MeshLambertMaterial({//创建材料
    color:0x0000FF,
    wireframe:false
  });
  var sphereMesh = new THREE.Mesh(sphereGeo, sphereMat);//创建球体网格模型
  sphereMesh.position.set(-25, 10, 0);//设置球的坐标
  return sphereMesh;
}

function createCylinder() {
  var cylinderGeo = new THREE.CylinderGeometry(15, 15 ,40 ,40 ,40);
  var cylinderMat = new THREE.MeshLambertMaterial({//创建材料
    color:0xFF6600,
    wireframe:false
  });

  //创建圆柱体网格模型
  var cylinderMesh = new THREE.Mesh(cylinderGeo, cylinderMat);
  cylinderMesh.position.set(0, 20, -40);//设置圆柱坐标
  return cylinderMesh;//向场景添加圆柱体
}


</script>
</body>
</html>
